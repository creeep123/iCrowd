<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>iCrowdTask</title>
  <link href="main.css" rel="stylesheet">
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.css" rel="stylesheet">
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap-reboot.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script type="text/javascript">//用cookie记住密码
    //读取cookie
    var email = $.cookie('email');
    var pwd = $.cookie('password');

    $(document).ready(function () {
      // 判断是否存在cookie
      if (email) {
        $("input[name='email']").val(email);
        $("input[name='password']").val(pwd);
        $("#rem").html("<input type=\"checkbox\" onclick=\"uncheck()\" id=\"check1\" checked/>");
      }
    });

    // 选中记住密码
    function check() {
      $("#rem").html("<input type=\"checkbox\" onclick=\"uncheck()\" id=\"check1\"/>");

      // 设置为选中状态
      document.getElementById("check1").checked = true;

      // 创建一个cookie并设置有效时间为 7天
      $.cookie('email', $("input[name='email']").val(), { expires: 7 });
      $.cookie('password', $("input[name='password']").val(), { expires: 7 });
      console.log("Checked")
    }

    // 取消记住密码
    function uncheck() {
      $("#rem").html("<input type=\"checkbox\" onclick=\"check()\" id=\"check1\"/>");
      // 设置为取消状态
      document.getElementById("check1").checked = false;

      // 删除cookie
      $.cookie('email', '');
      $.cookie('password', '');

    }
  </script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">



</head>

<body>


  <div class="container">
    <hr>
    <div class="row">
      <aside class="col-6">
        <h4 class="card-title mb-4 mt-1">iCrowdTask Login</h4>
        <div class="card">
          <article class="card-body">
            <a href="./register" class="float-right btn btn-outline-primary">Sign up</a>
            <h4 class="card-title mb-4 mt-1">Sign in</h4>
            <form action="/sign_in_handler" method="POST" role="form">
              <div class="form-group">
                <label>Your email</label>
                <input name="email" class="form-control" placeholder="Email" type="email">
              </div> <!-- form-group// -->
              <div class="form-group">
                <a class="float-right" href="/forgot">Forgot?</a>
                <label>Your password</label>
                <input name="password" class="form-control" placeholder="******" type="password">
              </div> <!-- form-group// -->
              <div class="form-group">
                <div class="checkbox">
                  <label>
                    <div id="rem"><input onclick="check()" type="checkbox"></div>Save password
                  </label>
                </div> <!-- checkbox .// -->
              </div> <!-- form-group// -->
              <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block"> Login </button>
              </div> <!-- form-group// -->
              <div class="or-container">
                <div class="line-separator"></div>
                <div class="or-label">or</div>
                <div class="line-separator"></div>
              </div>
              <div class="form-group">
                <a href="/google_sign_in">
                  <button type="button" class="btn btn-google btn-light btn-block"> <img
                      src="https://img.icons8.com/color/16/000000/google-logo.png"> Sign In Using Google </button>
                </a>
              </div> <br>
            </form>
          </article>

        </div> <!-- card.// -->
</body>

</html>